<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>高性能javascript | 前端知识体库</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/img/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.b71a9117.css" as="style"><link rel="preload" href="/assets/js/app.78296e05.js" as="script"><link rel="preload" href="/assets/js/2.fe84df1e.js" as="script"><link rel="preload" href="/assets/js/18.904234b2.js" as="script"><link rel="prefetch" href="/assets/js/10.69f3024b.js"><link rel="prefetch" href="/assets/js/11.3c9f76fa.js"><link rel="prefetch" href="/assets/js/12.85dbeff8.js"><link rel="prefetch" href="/assets/js/13.9683359d.js"><link rel="prefetch" href="/assets/js/14.2cabde5e.js"><link rel="prefetch" href="/assets/js/15.2c2784b6.js"><link rel="prefetch" href="/assets/js/16.fd483a46.js"><link rel="prefetch" href="/assets/js/17.87ad3e80.js"><link rel="prefetch" href="/assets/js/19.1607e2ef.js"><link rel="prefetch" href="/assets/js/20.8f8148fa.js"><link rel="prefetch" href="/assets/js/21.295891c2.js"><link rel="prefetch" href="/assets/js/22.a637a138.js"><link rel="prefetch" href="/assets/js/23.f7489fb3.js"><link rel="prefetch" href="/assets/js/24.54859964.js"><link rel="prefetch" href="/assets/js/25.0f3cbb8c.js"><link rel="prefetch" href="/assets/js/26.47560d0c.js"><link rel="prefetch" href="/assets/js/27.f778fe2f.js"><link rel="prefetch" href="/assets/js/28.eb137b8b.js"><link rel="prefetch" href="/assets/js/29.c5e83008.js"><link rel="prefetch" href="/assets/js/3.cc802162.js"><link rel="prefetch" href="/assets/js/30.a3760b76.js"><link rel="prefetch" href="/assets/js/31.a8ae5170.js"><link rel="prefetch" href="/assets/js/32.12b9e7cf.js"><link rel="prefetch" href="/assets/js/33.b8c7564e.js"><link rel="prefetch" href="/assets/js/34.dbb3897a.js"><link rel="prefetch" href="/assets/js/35.a8986c3d.js"><link rel="prefetch" href="/assets/js/36.4513de15.js"><link rel="prefetch" href="/assets/js/37.770f4e3a.js"><link rel="prefetch" href="/assets/js/38.2dcfb5b5.js"><link rel="prefetch" href="/assets/js/39.e9a2c546.js"><link rel="prefetch" href="/assets/js/4.c67d8aad.js"><link rel="prefetch" href="/assets/js/40.8fdb2cfb.js"><link rel="prefetch" href="/assets/js/41.f3ee0f68.js"><link rel="prefetch" href="/assets/js/42.e079f9a8.js"><link rel="prefetch" href="/assets/js/43.a27897f2.js"><link rel="prefetch" href="/assets/js/44.e1e9dc34.js"><link rel="prefetch" href="/assets/js/45.613e67ba.js"><link rel="prefetch" href="/assets/js/46.ebea46a3.js"><link rel="prefetch" href="/assets/js/47.bb3d124f.js"><link rel="prefetch" href="/assets/js/48.546d069b.js"><link rel="prefetch" href="/assets/js/5.89bf2cd4.js"><link rel="prefetch" href="/assets/js/6.a67e17b0.js"><link rel="prefetch" href="/assets/js/7.4c8a2fd2.js"><link rel="prefetch" href="/assets/js/8.e3eef520.js"><link rel="prefetch" href="/assets/js/9.ff33e87e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b71a9117.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="前端知识体库" class="logo"> <span class="site-name can-hide">前端知识体库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  每日一鲜
</a></div><div class="nav-item"><a href="/blog.html" class="nav-link">
  博客/会议
</a></div><div class="nav-item"><a href="https://juejin.im/timeline" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://time.geekbang.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  极客时间
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.vuepress.cn/guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://developer.mozilla.org/zh-CN/docs/Web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/wuzaofeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金翻译计划
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://voice.baidu.com/act/newpneumonia/newpneumonia/?from=osari_pc_3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  疫情实时
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  每日一鲜
</a></div><div class="nav-item"><a href="/blog.html" class="nav-link">
  博客/会议
</a></div><div class="nav-item"><a href="https://juejin.im/timeline" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://time.geekbang.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  极客时间
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.vuepress.cn/guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://developer.mozilla.org/zh-CN/docs/Web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/wuzaofeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金翻译计划
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://voice.baidu.com/act/newpneumonia/newpneumonia/?from=osari_pc_3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  疫情实时
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="sidebar-link">自动化部署静态文档</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>学习笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/html/" class="sidebar-link">html</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/css/select/" class="sidebar-link">CSS选择器笔记</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/javascript/deep/" class="sidebar-link">重学JS</a></li><li><a href="/learning/javascript/deep/es6.html" class="sidebar-link">重学es6</a></li><li><a href="/learning/javascript/function.html" class="sidebar-link">模拟方法</a></li><li><a href="/learning/javascript/expression.html" class="sidebar-link">什么是表达式语句</a></li><li><a href="/learning/javascript/extends.html" class="sidebar-link">js继承的方法以及优缺点</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/design/create.html" class="sidebar-link">设计模式(创建设计模式)</a></li><li><a href="/learning/design/struct.html" class="sidebar-link">设计模式(结构化设计模式)</a></li><li><a href="/learning/design/behaviour.html" class="sidebar-link">设计模式(行为型设计模式)</a></li><li><a href="/learning/design/book.html" class="sidebar-link">推荐设计模式书籍</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/vue2/" class="sidebar-link">vue2</a></li><li><a href="/learning/vue3.html" class="sidebar-link">vue3</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>typescript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/typescript/ts-collection-question.html" class="sidebar-link">【好文】耗时一年整理，全网最全的TypeScript踩坑集锦 (纯 TS 问题)</a></li><li><a href="/learning/typescript/ts-collection-config.html" class="sidebar-link">【好文】耗时一年整理，全网最全的TypeScript踩坑集锦 (tsconfig.json 常用配置项注释)</a></li><li><a href="/learning/typescript/ts-collection-react.html" class="sidebar-link">【好文】耗时一年整理，全网最全的TypeScript踩坑集锦（React + TS 项目问题）</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>前端工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/project/webpack/" class="sidebar-link">【好文】企业级 Webpack 分享总结</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>读书笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/readBook/HighPerformanceJS/" class="active sidebar-link">高性能javascript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/readBook/HighPerformanceJS/#浏览器在代码执行的过程中遇到script标签都会阻塞浏览器执行" class="sidebar-link">浏览器在代码执行的过程中遇到script标签都会阻塞浏览器执行</a></li><li class="sidebar-sub-header"><a href="/readBook/HighPerformanceJS/#对象的优化" class="sidebar-link">对象的优化</a></li><li class="sidebar-sub-header"><a href="/readBook/HighPerformanceJS/#dom节点优化" class="sidebar-link">Dom节点优化</a></li><li class="sidebar-sub-header"><a href="/readBook/HighPerformanceJS/#js的算法和流程控制" class="sidebar-link">JS的算法和流程控制</a></li><li class="sidebar-sub-header"><a href="/readBook/HighPerformanceJS/#字符串和正则表达式" class="sidebar-link">字符串和正则表达式</a></li><li class="sidebar-sub-header"><a href="/readBook/HighPerformanceJS/#js代码编程实战" class="sidebar-link">js代码编程实战</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工作笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/working/wechat/webview.html" class="sidebar-link">微信小程序内嵌webview问题</a></li><li><a href="/working/verdaccio.html" class="sidebar-link">verdaccio 指南</a></li><li><a href="/working/webpack/" class="sidebar-link">vue-cli3项目构建优化</a></li><li><a href="/working/nethall/first-paint.html" class="sidebar-link">网厅首屏优化</a></li><li><a href="/working/nethall/home-bug/" class="sidebar-link">网厅首页开发问题笔记</a></li><li><a href="/working/nethall/validate-code/" class="sidebar-link">验证码封装组件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>面试笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/job/html.html" class="sidebar-link">HTML面试题</a></li><li><a href="/job/css/" class="sidebar-link">CSS面试题</a></li><li><a href="/job/js.html" class="sidebar-link">JS面试题</a></li><li><a href="/job/browser.html" class="sidebar-link">浏览器面试题</a></li><li><a href="/job/description.html" class="sidebar-link">原理面试题</a></li><li><a href="/job/frame.html" class="sidebar-link">框架面试题</a></li><li><a href="/job/vue/" class="sidebar-link">vue面试题</a></li><li><a href="/job/way/" class="sidebar-link">前端面试之道的理解</a></li><li><a href="/job/project.html" class="sidebar-link">工程类面试</a></li></ul></section></li><li><a href="/cracked.html" class="sidebar-link">工具破解链接</a></li><li><a href="https://ustbhuangyi.github.io/vue-analysis/v2/prepare/" target="_blank" rel="noopener noreferrer" class="sidebar-link">Vue.js 技术揭秘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="高性能javascript"><a href="#高性能javascript" class="header-anchor">#</a> 高性能javascript</h1> <h2 id="浏览器在代码执行的过程中遇到script标签都会阻塞浏览器执行"><a href="#浏览器在代码执行的过程中遇到script标签都会阻塞浏览器执行" class="header-anchor">#</a> 浏览器在代码执行的过程中遇到script标签都会阻塞浏览器执行</h2> <ul><li>位置：script代码*合放置于<code>body</code>结束标签前，确保页面渲染之后再执行脚本，不会导致长时间空白屏</li> <li>合并：合并脚本，减少script标签，不管是外链还是内嵌脚本</li> <li>下载方式：优化script代码无非就是保证script最后执行，无阻塞执行
<ul><li>script标签使用<strong>defer</strong>属性</li> <li><strong>动态创建</strong>script标签</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> script</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> script<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
    script<span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>script<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// IE</span>
      script<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>script<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">&quot;loaded&quot;</span> <span class="token operator">||</span> script<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">&quot;complete&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        script<span class="token punctuation">.</span>onreadstatechange <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 其他浏览器</span>
          script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      script<span class="token punctuation">.</span>src <span class="token operator">=</span> url
      document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendClid</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>xhr对象</strong>执行下载<code>javascript</code>注入到页面中</li></ul> <h3 id="常用的延时加载库"><a href="#常用的延时加载库" class="header-anchor">#</a> 常用的延时加载库</h3> <ul><li>YUI3</li> <li>LazyLoad</li> <li>LABjs</li></ul> <h2 id="对象的优化"><a href="#对象的优化" class="header-anchor">#</a> 对象的优化</h2> <ul><li>访问<strong>字面量</strong>和<strong>变量</strong>比访问<strong>对象</strong>和<strong>对象成员</strong>要快</li> <li>经常定义<strong>局部变量</strong>，作用域链位置越深，访问所需的时间更长</li> <li><strong>属性</strong>和<strong>方法原型</strong>的<strong>位置越深</strong>，访问的时间越长</li> <li>一般来说，常访问的变量将一个<strong>局部变量</strong>来保存，可以<strong>提高访问速度</strong></li></ul> <h2 id="dom节点优化"><a href="#dom节点优化" class="header-anchor">#</a> Dom节点优化</h2> <ul><li><p><strong>减少</strong><code>dom</code>节点的访问次数</p> <ul><li><code>innerHTML</code>（常用）</li> <li><code>cloneNode</code>(克隆方法）</li></ul></li> <li><p>多次访问某个<code>dom</code>节点，使用<strong>局部变量</strong>来<strong>存储</strong></p></li> <li><p>html集合会实时连接着底层文档，将集合长度<strong>缓存</strong>在一个<strong>变量</strong>中，如果经常使用该集合，可以转成<strong>数组</strong>来使用，使用数组比使用集合要快N倍</p></li> <li><p>披露修改<code>dom</code>节点时，需将元素<strong>脱离文档流</strong>，处理<code>dom</code>元素之后，再带回文档中</p></li></ul> <h3 id="脱离文档流方法"><a href="#脱离文档流方法" class="header-anchor">#</a> 脱离文档流方法</h3> <ul><li>隐藏元素，引用修改，重新显示，使用display</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">=</span><span class="token string">&quot;none&quot;</span>
  <span class="token function">appendDataToElement</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">// 更新节点通用函数</span>
  ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token operator">=</span><span class="token string">&quot;block&quot;</span>
</code></pre></div><p>*使用文档片段document.createDocumentFragment来操作（最优）</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">appendDataToElement</span><span class="token punctuation">(</span>fragment<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">// 更新节点通用函数</span>
  document<span class="token punctuation">.</span><span class="token function">getElement</span><span class="token punctuation">(</span><span class="token string">'list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span>
</code></pre></div><ul><li>先克隆元素，在处理</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> old<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'list'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> clone <span class="token operator">=</span> old<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token function">appendDataToElement</span><span class="token punctuation">(</span>fragment<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">// 更新节点通用函数</span>
  old<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>clone<span class="token punctuation">,</span> old<span class="token punctuation">)</span>
</code></pre></div><ul><li>常用的方法</li></ul> <table><thead><tr><th>属性名</th> <th style="text-align:center;">被代替的属性名</th></tr></thead> <tbody><tr><td>children</td> <td style="text-align:center;">childNodes</td></tr> <tr><td>childElementCount</td> <td style="text-align:center;">childNodes.length</td></tr> <tr><td>firstElementChild</td> <td style="text-align:center;">firstChild</td></tr> <tr><td>lastElementChild</td> <td style="text-align:center;">lastChild</td></tr> <tr><td>nextElementSibling</td> <td style="text-align:center;">nextSibling</td></tr> <tr><td>previousElementSibling</td> <td style="text-align:center;">previousSibling</td></tr></tbody></table> <ul><li>动画使用绝对定位，使用拖放代理</li> <li>使用事件委托减少事件处理器的数量</li></ul> <h2 id="js的算法和流程控制"><a href="#js的算法和流程控制" class="header-anchor">#</a> JS的算法和流程控制</h2> <ul><li><p>使用<code>for</code>, <code>while</code>, 和<code>do-while</code>循环性能特性相当，但避免使用<code>for-in</code>循环，除非需要遍历一个属性未知的对象， 函数的迭代<code>forEach</code>, <code>map</code>性能比原始的for循环</p></li> <li><p>使用查找表比<code>if-else</code>和<code>switch</code>更快</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 返回值集合存入数组</span>
<span class="token keyword">var</span> results <span class="token operator">=</span> <span class="token punctuation">[</span>result0<span class="token punctuation">,</span> result1<span class="token punctuation">,</span> result2<span class="token punctuation">]</span>
<span class="token comment">// 返回当前的结果</span>
<span class="token keyword">return</span> results<span class="token punctuation">[</span>value<span class="token punctuation">]</span>
</code></pre></div><ul><li><p><strong>递归</strong>：函数通过自身反复的调用，或者<strong>两个函数</strong>之间<strong>反复</strong>的调用达到循环的目的。递归会有栈溢出的风险</p> <p><strong>迭代（遍历）</strong>：递归的实现算法都可以用迭代来实现，通过<strong>循环</strong>来实现</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果由于使用<strong>递归</strong>算法导致<strong>栈溢出</strong>，可以考虑使用迭代算法或者memoization来避免重复计算</p></div> <h2 id="字符串和正则表达式"><a href="#字符串和正则表达式" class="header-anchor">#</a> 字符串和正则表达式</h2> <ul><li>如果考虑<strong>ie7</strong>以及更早的版本的话，可以使用<strong>数组合并</strong>，再转成字符串。不考虑的话使用<strong>简单的+和+=操作符</strong>来替代</li> <li>回溯既是正则表达式匹配功能的基本组成部分，也是正则表达式的低效之源，回溯失控发生于正则表达式原本能快速匹配的地方，由于某些特殊字符导致运行缓慢甚至浏览器奔溃</li></ul> <h3 id="避免该问题的发生"><a href="#避免该问题的发生" class="header-anchor">#</a> 避免该问题的发生</h3> <ul><li>使用<strong>相邻</strong>的<strong>字元互斥</strong></li> <li>避免量词对同一字符串的<strong>相同部分多次匹配</strong></li> <li>通过服用利用<strong>预查的原子组</strong>去除不必要的回溯</li></ul> <h2 id="js代码编程实战"><a href="#js代码编程实战" class="header-anchor">#</a> js代码编程实战</h2> <ul><li><p><strong>避免双重求值</strong>， 因为通过动态执行字符串时，会自动创建一个新的解析器实例，来执行这字符串
动态执行字符串中的js方法：</p> <ul><li><p>eval()</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'num1+num2'</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>function()构造器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'num1'</span><span class="token punctuation">,</span><span class="token string">'num2'</span><span class="token punctuation">,</span> <span class="token string">'return num1+num2'</span> <span class="token punctuation">)</span>
</code></pre></div></li> <li><p>setTimeout</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">'num1+num2'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>setTimeInterval</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeInterval</span><span class="token punctuation">(</span><span class="token string">'num1+num2'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li> <li><p><strong>避免重复工作</strong> 需要检测浏览器时，可以使用延迟加载或条件预加载</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">addHandler</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> handle<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// IE</span>
      target<span class="token punctuation">.</span><span class="token function">attactEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> eventType<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="解决办法"><a href="#解决办法" class="header-anchor">#</a> 解决办法</h3> <ul><li><p>延迟加载: 第一次调用时，先检查一下并决定使用那个方法，然后原始函数会被正确的函数覆盖</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">addHandler</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        addHandler <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> handle<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// IE</span>
      addHandler <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">attactEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> eventType<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 调用新函数，并且覆盖</span>
    <span class="token function">addHandler</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>条件预加载: 在脚本加载时直接提前检测，不会等到调用时再检测</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> addHandle <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>addEventListener <span class="token operator">?</span> <span class="token keyword">function</span> <span class="token function">addHandler</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> handle<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">addHandler</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// IEtarget.attactEvent('on' + eventType, handler)</span>
    <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>尽量使用直接量创建对象或数组，直接量比非直接量的形式要快</p></li> <li><p>数学计算时，考虑使用操作数字的二进制形式的<a href="https://juejin.im/post/5dc36f39e51d4529ed292910" target="_blank" rel="noopener noreferrer"><strong>位运算</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>尽量用js中的原生方法，比如Math方法</p></li></ul> <h4 id="书籍"><a href="#书籍" class="header-anchor">#</a> 书籍</h4> <p><img src="/assets/img/1.08adacf0.jpg" alt="高性能javascript"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/learning/project/webpack/" class="prev">
        【好文】企业级 Webpack 分享总结
      </a></span> <span class="next"><a href="/working/wechat/webview.html">
        微信小程序内嵌webview问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.78296e05.js" defer></script><script src="/assets/js/2.fe84df1e.js" defer></script><script src="/assets/js/18.904234b2.js" defer></script>
  </body>
</html>
