<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>耗时一年整理，全网最全的TypeScript踩坑集锦（React + TS 项目问题） | 前端知识体库</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/img/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.b71a9117.css" as="style"><link rel="preload" href="/assets/js/app.69b6f073.js" as="script"><link rel="preload" href="/assets/js/2.9dee35fb.js" as="script"><link rel="preload" href="/assets/js/7.789c78ba.js" as="script"><link rel="prefetch" href="/assets/js/10.72eab03f.js"><link rel="prefetch" href="/assets/js/11.36d900ed.js"><link rel="prefetch" href="/assets/js/12.3611d5e6.js"><link rel="prefetch" href="/assets/js/13.498fcf64.js"><link rel="prefetch" href="/assets/js/14.105d71c3.js"><link rel="prefetch" href="/assets/js/15.8f66c224.js"><link rel="prefetch" href="/assets/js/16.66b51a7d.js"><link rel="prefetch" href="/assets/js/17.f0b27175.js"><link rel="prefetch" href="/assets/js/18.df4675c7.js"><link rel="prefetch" href="/assets/js/19.c8257e10.js"><link rel="prefetch" href="/assets/js/20.b02b43a9.js"><link rel="prefetch" href="/assets/js/21.1d419a57.js"><link rel="prefetch" href="/assets/js/22.0b245ca8.js"><link rel="prefetch" href="/assets/js/23.aa580206.js"><link rel="prefetch" href="/assets/js/24.11c09196.js"><link rel="prefetch" href="/assets/js/25.5fcda01a.js"><link rel="prefetch" href="/assets/js/26.43711162.js"><link rel="prefetch" href="/assets/js/27.e7a2ebb9.js"><link rel="prefetch" href="/assets/js/28.9eabc00d.js"><link rel="prefetch" href="/assets/js/29.3e514edc.js"><link rel="prefetch" href="/assets/js/3.d5e4bc60.js"><link rel="prefetch" href="/assets/js/30.a104eb5e.js"><link rel="prefetch" href="/assets/js/31.098fe517.js"><link rel="prefetch" href="/assets/js/32.01a9e3ef.js"><link rel="prefetch" href="/assets/js/33.955fec17.js"><link rel="prefetch" href="/assets/js/34.34ba1e62.js"><link rel="prefetch" href="/assets/js/35.9c834cf5.js"><link rel="prefetch" href="/assets/js/36.23c51565.js"><link rel="prefetch" href="/assets/js/37.35c464d0.js"><link rel="prefetch" href="/assets/js/38.d3c809dd.js"><link rel="prefetch" href="/assets/js/39.08671b97.js"><link rel="prefetch" href="/assets/js/4.a2fd4576.js"><link rel="prefetch" href="/assets/js/40.b5bc9076.js"><link rel="prefetch" href="/assets/js/41.d5f34134.js"><link rel="prefetch" href="/assets/js/42.6e6372ef.js"><link rel="prefetch" href="/assets/js/43.8c4644e3.js"><link rel="prefetch" href="/assets/js/44.9a886f7b.js"><link rel="prefetch" href="/assets/js/5.799b722a.js"><link rel="prefetch" href="/assets/js/6.63d5b9dd.js"><link rel="prefetch" href="/assets/js/8.269ff89f.js"><link rel="prefetch" href="/assets/js/9.833a2aab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b71a9117.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="前端知识体库" class="logo"> <span class="site-name can-hide">前端知识体库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  每日一鲜
</a></div><div class="nav-item"><a href="/blog.html" class="nav-link">
  博客/会议
</a></div><div class="nav-item"><a href="https://juejin.im/timeline" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://time.geekbang.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  极客时间
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.vuepress.cn/guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://developer.mozilla.org/zh-CN/docs/Web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/wuzaofeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金翻译计划
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://voice.baidu.com/act/newpneumonia/newpneumonia/?from=osari_pc_3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  疫情实时
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  每日一鲜
</a></div><div class="nav-item"><a href="/blog.html" class="nav-link">
  博客/会议
</a></div><div class="nav-item"><a href="https://juejin.im/timeline" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://time.geekbang.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  极客时间
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.vuepress.cn/guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://developer.mozilla.org/zh-CN/docs/Web" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/wuzaofeng" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/xitu/gold-miner" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金翻译计划
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://voice.baidu.com/act/newpneumonia/newpneumonia/?from=osari_pc_3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  疫情实时
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="sidebar-link">自动化部署静态文档</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>学习笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/html/" class="sidebar-link">html</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/css/select/" class="sidebar-link">CSS选择器笔记</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/javascript/deep/" class="sidebar-link">重学JS</a></li><li><a href="/learning/javascript/function.html" class="sidebar-link">模拟方法</a></li><li><a href="/learning/javascript/expression.html" class="sidebar-link">什么是表达式语句</a></li><li><a href="/learning/javascript/extends.html" class="sidebar-link">js继承的方法以及优缺点</a></li><li><a href="/learning/javascript/design/create.html" class="sidebar-link">设计模式(创建设计模式)</a></li><li><a href="/learning/javascript/design/struct.html" class="sidebar-link">设计模式(结构化设计模式)</a></li><li><a href="/learning/javascript/design/behaviour.html" class="sidebar-link">设计模式(行为型设计模式)</a></li><li><a href="/learning/javascript/design/book.html" class="sidebar-link">推荐设计模式书籍</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>typescript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/typescript/ts-collection-question.html" class="sidebar-link">【好文】耗时一年整理，全网最全的TypeScript踩坑集锦 (纯 TS 问题)</a></li><li><a href="/learning/typescript/ts-collection-config.html" class="sidebar-link">【好文】耗时一年整理，全网最全的TypeScript踩坑集锦 (tsconfig.json 常用配置项注释)</a></li><li><a href="/learning/typescript/ts-collection-react.html" class="active sidebar-link">【好文】耗时一年整理，全网最全的TypeScript踩坑集锦（React + TS 项目问题）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_1-使用-import-引入非-js-模块会报错，而使用-require-则没有问题" class="sidebar-link">1. 使用 import 引入非 JS 模块会报错，而使用 require 则没有问题</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_2-import-as-react-from-react-和-import-react-from-react-有什么区别" class="sidebar-link">2. import * as React from 'react' 和 import React from 'react' 有什么区别</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_3-react-redux-react-redux-项目：使用-connect-装饰器正常，但是一旦结合-ts-后，就会报错" class="sidebar-link">3. react + redux + react-redux 项目：使用 @connect 装饰器正常，但是一旦结合 TS 后，就会报错</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_4-react-redux-react-redux-项目：在使用-mapstatetoprops-state-函数时，想要给仓库中的-state-声明类型" class="sidebar-link">4. react + redux + react-redux 项目：在使用 mapStateToProps(state) 函数时，想要给仓库中的 state 声明类型</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_5-react-redux-react-redux-项目：想要给-action-creator-函数声明类型" class="sidebar-link">5. react + redux + react-redux 项目：想要给 action creator 函数声明类型</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_6-react-redux-react-redux-项目：给-react-组件的-props-声明类型（较为便捷的方法）" class="sidebar-link">6.  react + redux + react-redux 项目：给 React 组件的 Props 声明类型（较为便捷的方法）</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_6-react-redux-react-redux-项目：想要给-redux-thunk-声明类型" class="sidebar-link">6. react + redux + react-redux 项目：想要给 redux-thunk 声明类型</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_7-使用-webpack-的-module-hot-会警告没有类型定义" class="sidebar-link">7. 使用 webpack 的 module.hot 会警告没有类型定义</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_8-tsconfig-paths-webpack-plugin-这个包会将-tsconfig-json-中的-path-配置项内容映射到-webpack-配置中去，这样就不需要在-webpack-中的-alias-配置项里配置路径映射" class="sidebar-link">8. tsconfig-paths-webpack-plugin 这个包会将 tsconfig.json 中的 path 配置项内容映射到 webpack 配置中去，这样就不需要在 webpack 中的 alias 配置项里配置路径映射</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_9-react-函数组件声明" class="sidebar-link">9. react 函数组件声明</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_10-如何编写-react-ts-版的-hoc" class="sidebar-link">10. 如何编写 react + ts 版的 HOC</a></li><li class="sidebar-sub-header"><a href="/learning/typescript/ts-collection-react.html#_11-快速获取事件处理函数的-event-参数类型" class="sidebar-link">11. 快速获取事件处理函数的 event 参数类型</a></li></ul></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>前端工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning/project/webpack/" class="sidebar-link">【好文】企业级 Webpack 分享总结</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>读书笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/readBook/HighPerformanceJS/" class="sidebar-link">高性能javascript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工作笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/working/wechat/webview.html" class="sidebar-link">微信小程序内嵌webview问题</a></li><li><a href="/working/verdaccio.html" class="sidebar-link">verdaccio 指南</a></li><li><a href="/working/webpack/" class="sidebar-link">vue-cli3项目构建优化</a></li><li><a href="/working/nethall/first-paint.html" class="sidebar-link">网厅首屏优化</a></li><li><a href="/working/nethall/home-bug/" class="sidebar-link">网厅首页开发问题笔记</a></li><li><a href="/working/nethall/validate-code/" class="sidebar-link">验证码封装组件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>面试笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/job/html.html" class="sidebar-link">HTML面试题</a></li><li><a href="/job/css/" class="sidebar-link">CSS面试题</a></li><li><a href="/job/js.html" class="sidebar-link">JS面试题</a></li><li><a href="/job/browser.html" class="sidebar-link">浏览器面试题</a></li><li><a href="/job/description.html" class="sidebar-link">原理面试题</a></li><li><a href="/job/frame.html" class="sidebar-link">框架面试题</a></li><li><a href="/job/vue/" class="sidebar-link">vue面试题</a></li><li><a href="/job/way/" class="sidebar-link">前端面试之道的理解</a></li></ul></section></li><li><a href="/cracked.html" class="sidebar-link">工具破解链接</a></li><li><a href="https://ustbhuangyi.github.io/vue-analysis/v2/prepare/" target="_blank" rel="noopener noreferrer" class="sidebar-link">Vue.js 技术揭秘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="耗时一年整理，全网最全的typescript踩坑集锦（react-ts-项目问题）"><a href="#耗时一年整理，全网最全的typescript踩坑集锦（react-ts-项目问题）" class="header-anchor">#</a> 耗时一年整理，全网最全的TypeScript踩坑集锦（React + TS 项目问题）</h1> <h2 id="_1-使用-import-引入非-js-模块会报错，而使用-require-则没有问题"><a href="#_1-使用-import-引入非-js-模块会报错，而使用-require-则没有问题" class="header-anchor">#</a> 1. 使用 import 引入非 JS 模块会报错，而使用 require 则没有问题</h2> <div class="language- extra-class"><pre class="language-text"><code>import styles from './login.less';
import logo from '@assets/images/logo.svg';

const logo2 = require('@assets/images/logo.svg');
console.log(logo2);// path
</code></pre></div><p><img src="/assets/img/r1.38ad6ee9.jpg" alt="r1"></p> <p><strong>解决办法：</strong> 给这些非 JS 模块添加申明</p> <div class="language- extra-class"><pre class="language-text"><code>/**
 * style
 */
declare module '*.css'
declare module '*.less'
// declare module &quot;*.less&quot; {
//     const styles: { [className: string]: string };
//     export default styles
// }
declare module '*.scss'


/**
 * 图片
 */
declare module '*.svg'
declare module '*.png'
declare module '*.jpg'
declare module '*.jpeg'
declare module '*.gif'
declare module '*.bmp'
</code></pre></div><h2 id="_2-import-as-react-from-react-和-import-react-from-react-有什么区别"><a href="#_2-import-as-react-from-react-和-import-react-from-react-有什么区别" class="header-anchor">#</a> 2. import * as React from 'react' 和 import React from 'react' 有什么区别</h2> <ul><li>第一种写法是将<strong>所有用 export 导出</strong>的成员赋值给 React ，导入后用 React.xxx 访问</li> <li>第二种写法仅是将默认导出（<strong>export default</strong>）的内容赋值给 React</li></ul> <h2 id="_3-react-redux-react-redux-项目：使用-connect-装饰器正常，但是一旦结合-ts-后，就会报错"><a href="#_3-react-redux-react-redux-项目：使用-connect-装饰器正常，但是一旦结合-ts-后，就会报错" class="header-anchor">#</a> 3. react + redux + react-redux 项目：使用 @connect 装饰器正常，但是一旦结合 TS 后，就会报错</h2> <p>https://segmentfault.com/a/1190000016047027</p> <div class="language- extra-class"><pre class="language-text"><code>import {ComponentClass} from 'react'
import {
    connect as nativeConnect,
    MapDispatchToPropsParam,
    MapStateToPropsParam
} from 'react-redux'
import {withRouter as nativeWithRouter} from 'react-router-dom'

export type ComponentDecorator&lt;P = any&gt; = &lt;T extends ComponentClass&lt;P&gt;&gt;(WrappedComponent: T) =&gt; T

export const connect: &lt;P, S&gt;(
    mapState: MapStateToPropsParam&lt;Partial&lt;P&gt;, P, S&gt;,
 // mapDispatch?: MapDispatchToPropsParam&lt;Partial&lt;P&gt;, P&gt;
    mapDispatch?: any
) =&gt; ComponentDecorator = nativeConnect as any;

export const withRouter: ComponentDecorator = nativeWithRouter as any;
</code></pre></div><h2 id="_4-react-redux-react-redux-项目：在使用-mapstatetoprops-state-函数时，想要给仓库中的-state-声明类型"><a href="#_4-react-redux-react-redux-项目：在使用-mapstatetoprops-state-函数时，想要给仓库中的-state-声明类型" class="header-anchor">#</a> 4. react + redux + react-redux 项目：在使用 mapStateToProps(state) 函数时，想要给仓库中的 state 声明类型</h2> <ul><li>借助 ReturnType</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// rootReducer.ts
import {combineReducers} from 'redux';
import {connectRouter} from 'connected-react-router';
import history from '../history';
import evidenceEdit from './evidence';
import common from './common';
import work from './work';
import setScene from './set-scene';

let reducers = {
    common,
    work,
    setScene,
    evidenceEdit,
    router: connectRouter(history)
};

// 使用 ReturnType 从 rootReducer 推断状态形状
// export type AppState = ReturnType&lt;typeof rootReducer&gt;
export type AppState = {
    [key in keyof typeof reducers]: ReturnType&lt;typeof reducers[key]&gt;
}

const rootReducer = combineReducers(reducers);

export default rootReducer;
// setScene 模块
import * as types from '../types/action-types';
import {appEditAction} from '../actions/common';

export interface SetSceneState {
    loadSuccess: boolean;
    loadProgress: number;
}

let initState: SetSceneState = {
    loadSuccess: false,
    loadProgress: 0,
};
export default function (state: SetSceneState = initState, action: appEditAction) {
    switch (action.type) {

        case types.SCENE_DATA_LOADSUCCESS: {
            return {...state, loadSuccess: action.payload.success};
        }
        case types.SCENE_DATA_LOADINGPROGRESS: {
            return {...state, loadProgress: action.payload.num};
        }
        default:
            return state;
    }
}
</code></pre></div><p>使用
<img src="/assets/img/r2.42ce8224.jpg" alt="r2"></p> <h2 id="_5-react-redux-react-redux-项目：想要给-action-creator-函数声明类型"><a href="#_5-react-redux-react-redux-项目：想要给-action-creator-函数声明类型" class="header-anchor">#</a> 5. react + redux + react-redux 项目：想要给 action creator 函数声明类型</h2> <div class="language- extra-class"><pre class="language-text"><code>// 在 Mesh 组件中
import workActions from &quot;@store/actions/work&quot;;

interface MeshProps {
    // 刚开始我是这样写的，每次都得在组件的 Props 里重新声明一下函数
    // updateSceneData?: (workId: string,data) =&gt; appEditAction;
    updateData?: typeof workActions.updateData;
}

@connect(null, {
    updateData: workActions.updateData,
})
class Mesh extends React.Component&lt;MeshProps&gt; {...}
// store/actions/work.ts

import * as types from '../types/action-types';
import {appEditAction} from &quot;@edit-store/actions/common&quot;;

export default {
    updateWorkData(workId: string, data: any): appEditAction {
        return {type: types.UPDATE_WORK_ASYNC, payload: {workId, data}}
    }
}
</code></pre></div><h2 id="_6-react-redux-react-redux-项目：给-react-组件的-props-声明类型（较为便捷的方法）"><a href="#_6-react-redux-react-redux-项目：给-react-组件的-props-声明类型（较为便捷的方法）" class="header-anchor">#</a> 6.  react + redux + react-redux 项目：给 React 组件的 Props 声明类型（较为便捷的方法）</h2> <div class="language- extra-class"><pre class="language-text"><code>import * as React from 'react';
import {RouteComponentProps} from 'react-router';
import {connect} from &quot;@store/connect&quot;;
import {AppState} from &quot;@store/reducers&quot;;
import commonActions from &quot;@store/actions/commonActions&quot;;

// 组件可能有四个属性来源
// 1.mapStateToProps 的返回值
// 2.actions 对象类型
// 3.来自路由
// 4.父组件传进来的其它属性

// 原先的写法：一个个拼起来，mapStateToProps 返回的状态还得在 Props 接口里再声明一遍，比较混乱、麻烦
// interface Props {
//     loadProgress?: number;
//     markVisible?: boolean;
//     setMarkVisible?: typeof commonActions.setMarkVisible;
// }

function mapStateToProps(state: AppState) {
    const {markVisible,loadProgress} = state;
    return {
        markVisible,
        loadProgress,
    };
}

// 现在的写法：便捷
type StateProps = ReturnType&lt;typeof mapStateToProps&gt;;
type DispatchProps = typeof commonActions;
interface IParams {}
type RouteProps = RouteComponentProps&lt;IParams&gt;;
type Props = StateProps &amp; RouteProps &amp; DispatchProps &amp; {};

@connect(mapStateToProps, {
    setMarkVisible: commonActions.setMarkVisible
})
export default class App extends React.PureComponent&lt;Props, any&gt; {
    render() {
        const {markVisible, loadProgress} = this.props;
        return (&lt;div &gt; {markVisible} {loadProgress} &lt;/div&gt;);
    }
}

</code></pre></div><h2 id="_6-react-redux-react-redux-项目：想要给-redux-thunk-声明类型"><a href="#_6-react-redux-react-redux-项目：想要给-redux-thunk-声明类型" class="header-anchor">#</a> 6. react + redux + react-redux 项目：想要给 redux-thunk 声明类型</h2> <p>redux thunk 有一个内置类型 <code>ThunkAction</code>，我们可以这样使用：</p> <div class="language- extra-class"><pre class="language-text"><code>// src/thunks.ts

import { Action } from 'redux'
import { sendMessage } from './store/chat/actions'
import { AppState } from './store'
import { ThunkAction } from 'redux-thunk'

export const thunkSendMessage = (
  message: string
): ThunkAction&lt;void, AppState, null, Action&lt;string&gt;&gt; =&gt; async dispatch =&gt; {
  const asyncResp = await exampleAPI()
  dispatch(
    sendMessage({
      message,
      user: asyncResp,
      timestamp: new Date().getTime()
    })
  )
}

function exampleAPI() {
  return Promise.resolve('Async')
}
</code></pre></div><h2 id="_7-使用-webpack-的-module-hot-会警告没有类型定义"><a href="#_7-使用-webpack-的-module-hot-会警告没有类型定义" class="header-anchor">#</a> 7. 使用 webpack 的 module.hot 会警告没有类型定义</h2> <div class="language- extra-class"><pre class="language-text"><code># 下载这个类型声明文件
$ npm install --save @types/webpack-env
if (process.env.NODE_ENV !== 'production') {
    if (module.hot) {
        module.hot.accept('./reducers', () =&gt; store.replaceReducer(rootReducer));
    }
}
</code></pre></div><h2 id="_8-tsconfig-paths-webpack-plugin-这个包会将-tsconfig-json-中的-path-配置项内容映射到-webpack-配置中去，这样就不需要在-webpack-中的-alias-配置项里配置路径映射"><a href="#_8-tsconfig-paths-webpack-plugin-这个包会将-tsconfig-json-中的-path-配置项内容映射到-webpack-配置中去，这样就不需要在-webpack-中的-alias-配置项里配置路径映射" class="header-anchor">#</a> 8. tsconfig-paths-webpack-plugin 这个包会将 tsconfig.json 中的 path 配置项内容映射到 webpack 配置中去，这样就不需要在 webpack 中的 alias 配置项里配置路径映射</h2> <p><img src="/assets/img/r3.5dd4938a.jpg" alt="r3"></p> <h2 id="_9-react-函数组件声明"><a href="#_9-react-函数组件声明" class="header-anchor">#</a> 9. react 函数组件声明</h2> <div class="language- extra-class"><pre class="language-text"><code>interface Greeting {
    name: string;
    age: number;
}

const Hello:React.FC&lt;Greeting&gt; = (props) =&gt; &lt;h1&gt;Hello {props.name}&lt;/h1&gt;;

// 推荐使用第二种
const Hello2 = (props:Greeting) =&gt; &lt;h1&gt;Hello {props.name}&lt;/h1&gt;;
</code></pre></div><h2 id="_10-如何编写-react-ts-版的-hoc"><a href="#_10-如何编写-react-ts-版的-hoc" class="header-anchor">#</a> 10. 如何编写 react + ts 版的 HOC</h2> <div class="language- extra-class"><pre class="language-text"><code>import React, { Component } from 'react';

import HelloClass from './HelloClass';

interface Loading {
    loading: boolean
}

// HOC 可以接收一个类组件，也可以接收一个函数组件，所以参数的类型是 React.ComponentType
// 源码：type ComponentType&lt;P = {}&gt; = ComponentClass&lt;P&gt; | FunctionComponent&lt;P&gt;;
function HelloHOC&lt;P&gt;(WrappedComponent: React.ComponentType&lt;P&gt;) {
    return class extends Component&lt;P &amp; Loading&gt; {
        render() {
            const { loading, ...props } = this.props;
            return loading ? &lt;div&gt;Loading...&lt;/div&gt; : &lt;WrappedComponent { ...props as P } /&gt;;
        }
    }
}

export default HelloHOC(HelloClass);
</code></pre></div><h2 id="_11-快速获取事件处理函数的-event-参数类型"><a href="#_11-快速获取事件处理函数的-event-参数类型" class="header-anchor">#</a> 11. 快速获取事件处理函数的 event 参数类型</h2> <div class="language- extra-class"><pre class="language-text"><code> class Login extends React.Component &lt;Props&gt;{

    handlerLinkBtnClick = (ev) =&gt; {
          console.log(ev);
        this.props.historyGo('./register');
    };

    handlerLinkBtnMouseMove = (ev) =&gt; {
       console.log(ev);
    };

    render() {
        return (
            &lt;div&gt;
                &lt;header&gt;
                    &lt;p &gt;This is Login Page &lt;/p&gt;
                    &lt;div className={styles.linkBtn}
                         onMouseMove={this.handlerLinkBtnMouseMove} 
                         onClick={this.handlerLinkBtnClick}&gt;
                         Go to Register Page
                   &lt;/div&gt;
                &lt;/header&gt;
            &lt;/div&gt;
        );
    }
}
</code></pre></div><p>按住 Ctrl ，然后鼠标移动到事件名上就能获取当前事件处理函数的参数类型
<img src="/assets/img/r4.d0a9ffae.jpg" alt="r4"></p> <div class="custom-block tip"><p class="custom-block-title">涉及链接</p> <p><a href="https://www.tslang.cn/" target="_blank" rel="noopener noreferrer">typescript中文版<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/learning/typescript/ts-collection-config.html" class="prev">
        【好文】耗时一年整理，全网最全的TypeScript踩坑集锦 (tsconfig.json 常用配置项注释)
      </a></span> <span class="next"><a href="/learning/project/webpack/">
        【好文】企业级 Webpack 分享总结
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.69b6f073.js" defer></script><script src="/assets/js/2.9dee35fb.js" defer></script><script src="/assets/js/7.789c78ba.js" defer></script>
  </body>
</html>
