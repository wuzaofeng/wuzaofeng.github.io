(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{206:function(s,t,e){s.exports=e.p+"assets/img/1.e3c64eac.jpg"},207:function(s,t,e){s.exports=e.p+"assets/img/2.c9187878.jpg"},208:function(s,t,e){s.exports=e.p+"assets/img/3.25632e28.jpg"},209:function(s,t,e){s.exports=e.p+"assets/img/4.7b108fac.jpg"},252:function(s,t,e){"use strict";e.r(t);var a=e(0),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"github-io-vuepress-travis-cl-实现自动化部署静态文档-博客"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-io-vuepress-travis-cl-实现自动化部署静态文档-博客"}},[s._v("#")]),s._v(" github.io + VuePress + travis-cl 实现自动化部署静态文档/博客")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),a("ol",[a("li",[s._v("github 为您搭建好的服务器，无需自己搭建服务器")]),s._v(" "),a("li",[s._v("VuePress 界面十分简洁，并且上手快，能快速的构建整个项目架构")]),s._v(" "),a("li",[s._v("travis-cl 可以为您提供自动化部署，只需在本地写好代码，并提交代码，剩下的线上流程全部交与travis实现")]),s._v(" "),a("li",[s._v("本项目使用yarn安装，因为构建安装速度快些")])])]),s._v(" "),a("h2",{attrs:{id:"为什么采用vuepress"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么采用vuepress"}},[s._v("#")]),s._v(" 为什么采用VuePress")]),s._v(" "),a("ul",[a("li",[s._v("内置Markdown 拓展")]),s._v(" "),a("li",[s._v("在Markdown 中使用vue")]),s._v(" "),a("li",[s._v("多语言配置支持")]),s._v(" "),a("li",[s._v("制定配置，主题配置")])]),s._v(" "),a("h2",{attrs:{id:"整体思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#整体思路"}},[s._v("#")]),s._v(" 整体思路")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("在github上创建项目，本地创建并切换到docs分支（开发分支），通过vuePress项目快速构建，添加travis.yml文件，上传到github")])]),s._v(" "),a("li",[a("p",[s._v("travis-cl 会自动编译， 安装依赖，并且创建分支到master分支")])]),s._v(" "),a("li",[a("p",[s._v("github会将master分支展示web内容")])])]),s._v(" "),a("h2",{attrs:{id:"操作步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[s._v("#")]),s._v(" 操作步骤")]),s._v(" "),a("ol",[a("li",[a("h4",{attrs:{id:"创建github项目-username-github-io-例如我的文档是-wuzaofeng-github-io-并且拉取到本地，创建自己的docs分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建github项目-username-github-io-例如我的文档是-wuzaofeng-github-io-并且拉取到本地，创建自己的docs分支"}},[s._v("#")]),s._v(" 创建github项目 [username].github.io, 例如我的文档是 wuzaofeng.github.io, 并且拉取到本地，创建自己的docs分支")])]),s._v(" "),a("li",[a("h4",{attrs:{id:"构建vuepress项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建vuepress项目"}},[s._v("#")]),s._v(" 构建vuepress项目")]),s._v(" "),a("ul",[a("li",[s._v("安装 vuepress")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yarn add -D vuepress\n")])])]),a("ul",[a("li",[s._v("package.json 添加script配置，dev(本地开发)和build(打包到生产)")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('script {\n    "dev": "vuepress dev docs",\n    "build": "vuepress build docs"\n}\n')])])]),a("ul",[a("li",[s._v("创建 docs 文件夹，把所有 markdown 文档存放在这里。")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mkdir docs\necho '# Hello VuePress!' > docs/README.md\n")])])])]),s._v(" "),a("li",[a("p",[s._v("写一些文档，查看vuepress文档，做一些简单的配置（详情可看文档）")])]),s._v(" "),a("li",[a("p",[s._v("在根目录创建.travis.yml， 特别说明 target_branch原分支为gh-pages， 但github pages需要在master上。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("language: node_js\nnode_js:\n    - lts/*\ninstall:\n    - yarn install # npm install\nscript:\n    - yarn build # 构建\ncache: yarn\ndeploy:\n    provider: pages\n    skip_cleanup: true\n    local_dir: docs/.vuepress/dist\n    github_token: $GITHUB_TOKEN # 在 GitHub 中生成，用于允许 Travis 向你的仓库推送代码。在 Travis 的项目设置页面进行配置，设置为 secure variable\n    keep_history: true\n    target_branch: master # 默认设置分支 之前默认：gh-pages\n    on:\n        branch: docs #  发布的时候使用的branch\n\n")])])]),a("ul",[a("li",[s._v("node_js 语言选择node")]),s._v(" "),a("li",[s._v("install 阶段：安装依赖")]),s._v(" "),a("li",[s._v("script 阶段：运行脚本")]),s._v(" "),a("li",[s._v("cache 开启缓存")]),s._v(" "),a("li",[s._v("deploy 部署\n"),a("ul",[a("li",[s._v("local_dir 打包之后的目录，travis-cl会将自动创建分支（master）将打包之后的文件都放在里面")]),s._v(" "),a("li",[s._v("github_token 配置github的token, 通过这个向你的仓库推送代码 $GITHUB_TOKEN 环境变量 这块后面会提到")]),s._v(" "),a("li",[s._v("target_branch 默认创建的分支名")]),s._v(" "),a("li",[s._v("on/branch:\n构建的分支")])])])])]),s._v(" "),a("li",[a("p",[s._v("添加github_token (不是在项目中的Settings, 而是账户的token)")]),s._v(" "),a("blockquote",[a("p",[s._v("Github 增加一个 Personal access tokens，位置在 Settings / Developer settings。")])])])]),s._v(" "),a("p",[a("img",{attrs:{src:e(206),alt:"add access_token"}})]),s._v(" "),a("ul",[a("li",[s._v("Note 随意填，填 travis-ci 就行。")]),s._v(" "),a("li",[s._v("除了 delete_repo 权限都打勾就行。")])]),s._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[a("p",[s._v("提交代码，接下来配置Travis cl 自动化构建")])]),s._v(" "),a("li",[a("p",[s._v("进入"),a("a",{attrs:{href:"https://travis-ci.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Travis CI"),a("OutboundLink")],1),s._v(", 使用github登录， =》进入面板"),a("a",{attrs:{href:"https://travis-ci.org/dashboard",target:"_blank",rel:"noopener noreferrer"}},[s._v("dashboard"),a("OutboundLink")],1),s._v(" =》 启动刚刚提交的项目，右上角 More options 点击 setting，配置环境变量")])])]),s._v(" "),a("ul",[a("li",[s._v("GITHUB_TOKEN  token 是通过上面拿到的")])]),s._v(" "),a("p",[a("img",{attrs:{src:e(207),alt:"poject"}}),s._v(" "),a("img",{attrs:{src:e(208),alt:"token"}})]),s._v(" "),a("ol",{attrs:{start:"8"}},[a("li",[s._v("提交代码之后，查看Travis CI面板，会自动构建\n"),a("img",{attrs:{src:e(209),alt:"ci"}})])])])}),[],!1,null,null,null);t.default=r.exports}}]);