(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{276:function(t,n,e){"use strict";e.r(n);var a=e(0),r=Object(a.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"模拟实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模拟实现"}},[t._v("#")]),t._v(" 模拟实现")]),t._v(" "),e("h2",{attrs:{id:"call模拟实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#call模拟实现"}},[t._v("#")]),t._v(" call模拟实现")]),t._v(" "),e("p",[e("strong",[t._v("思路")])]),t._v(" "),e("ol",[e("li",[e("p",[t._v("自定义该对象一个属性，值为该执行的函数， this可以获取到需要调用到函数")])]),t._v(" "),e("li",[e("p",[t._v("执行函数， 传入参数(...args), 获取返回值")])]),t._v(" "),e("li",[e("p",[t._v("删除函数")])]),t._v(" "),e("li",[e("p",[t._v("返回值")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Function.prototype.call2 = function (context, ...args) {\n  var context = context || window\n  // this 指的是调用它函数\n  context.fn = this\n  var result = context.fn(...args)\n  delete context.fn\n  return result\n}\n")])])]),e("h2",{attrs:{id:"apply-模拟实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apply-模拟实现"}},[t._v("#")]),t._v(" apply 模拟实现")]),t._v(" "),e("p",[t._v("实现和call一样。只是传入参数传入是数组的形式")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Function.prototype.apply2 = function (context, arr) {\n  var context = context || window\n  // this 指的是调用它函数\n  context.fn = this\n  var result = context.fn(...arr)\n  delete context.fn\n  return result\n}\n")])])]),e("h2",{attrs:{id:"bind-模拟实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bind-模拟实现"}},[t._v("#")]),t._v(" bind 模拟实现")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("返回一个函数")])]),t._v(" "),e("li",[e("p",[t._v("可以传入参数， 可以在bind时候传入，也可以在返回函数的时候传入，两个参数拼接起来")])]),t._v(" "),e("li",[e("p",[t._v("可以返回函数，用构造函数创建，this指向实例")])])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/12",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript深入之bind的模拟实现"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('Function.prototype.bind = function (context, ...arr) {\n  if (typeof this !== "function") {\n    throw new Error("Function.prototype.bind - what is trying to be bound is not callable");\n  }\n  const _self = this // bar\n  const fBound = function (...bindArr) {\n    // 如果是构造函数，那么this就是实例，那么通过instanceof 判断是true,是构造函数，否则就函数调用\n    // 处理返回值\n    return _self.apply(this instanceof fBound ? this : context, [...arr, ...bindArr])\n  }\n\n  // 返回的函数fBound继承一下当前调用函数的bar的原型\n  fBound.prototype = Object.create(_self.prototype)\n  // 等价于\n  // function f () {}\n  // f.prototype = _self.prototype\n  // fBound.prototype = new f()\n\n  return fBound\n}\n')])])]),e("h2",{attrs:{id:"new-实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#new-实现"}},[t._v("#")]),t._v(" new 实现")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("function objectFactory (constructor, ...args) {\n  const obj = Object.create(null)\n  obj._proto = constructor.prototype // 创建对象原型指向构造函数的原型上\n  const result = constructor.apply(obj, [...args]) // 执行构造函数， 改变this\n  return typeof result === 'object' ? result : obj // 如果构造函数返回对象，才返回，如果是基本类型则还是返回创建对象\n}\n")])])]),e("h2",{attrs:{id:"防抖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#防抖"}},[t._v("#")]),t._v(" 防抖")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("function debounce (fn, wait) {\n  let timeout result\n  return function (...args) {\n    if (timeout) clearTimeOut(timeout)\n    timeout = setTimeOut(() => {\n      fn.apply(this, args)\n    }, wait)\n  }\n}\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("function debounce (fn, wait, immediate = false) {\n  let timeout, result\n  const debounced = function (...args) {\n    if (timeout) clearTimeout(timeout)\n    if (immediate) {\n      // 立即执行函数，停止n秒后才能再次触发\n      // 如果已经执行过，就不会再执行\n      const callNow = !timeout\n      timeout = setTimeout(() => {\n        timeout = null\n      }, wait)\n      if (callNow) result = fn.apply(this, args)\n    } else {\n      timeout = setTimeout (() => {\n        fn.apply(this, args)\n      }, wait)\n    }\n    // 由于setTimeOut是延时执行，所以拿不到返回值\n    // 当immediate为true 有返回值，false则为undefined\n    return result\n  }\n\n  // 取消事件\n  debounced.cancel = function() {\n    clearTimeout(timeout)\n    timeout = null\n  }\n  return debounced\n}\n\n")])])]),e("h2",{attrs:{id:"节流"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#节流"}},[t._v("#")]),t._v(" 节流")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("function throttle(fn, wait) {\n  let timeout\n  return function (...args) {\n    if (!timeout) {\n      timeout = setTimeOut(() => {\n        timeout = null\n        fn.apply(this, args)\n      }, wait)\n    }\n  }\n}\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("function throttle(func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n        previous = options.leading === false ? 0 : new Date().getTime();\n        timeout = null;\n        func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n        var now = new Date().getTime();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n    };\n    throttled.cancel = function() {\n      clearTimeout(timeout);\n      previous = 0;\n      timeout = null;\n    }\n    return throttled;\n}\n")])])]),e("h2",{attrs:{id:"深-浅拷贝"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#深-浅拷贝"}},[t._v("#")]),t._v(" 深/浅拷贝")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("slice、concat, JSON.stringify\n\nfunction shallowCopy (obj) {\n  if (typeof obj !== 'object') return\n  var newObj = obj instanceOf Array ? [] : {}\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      newObj[key] = obj[key]\n    }\n  }\n}\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("function deepCopy (obj) {\n  if (typeof obj !== 'object') return\n  var newObj = obj instanceOf Array ? [] : {}\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      newObj[key] = typeof obj[key] === 'object' ? deepCopy(obj[key]) : obj[key]\n    }\n  }\n}\n")])])]),e("h2",{attrs:{id:"柯里化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#柯里化"}},[t._v("#")]),t._v(" 柯里化")]),t._v(" "),e("p",[t._v("元是指函数传入的参数，一个参数叫做一元")]),t._v(" "),e("p",[t._v("柯里化就是一个n元函数转化成n个一元函数")]),t._v(" "),e("p",[t._v("一个函数转多多个")]),t._v(" "),e("h2",{attrs:{id:"偏函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#偏函数"}},[t._v("#")]),t._v(" 偏函数")]),t._v(" "),e("p",[t._v("局部应用")]),t._v(" "),e("p",[t._v("一个转一个")]),t._v(" "),e("p",[t._v("固定一个函数的一个或者多个参数")]),t._v(" "),e("p",[t._v("一个n 元函数转化成 一个 n - x 元 函数")]),t._v(" "),e("p",[t._v("两者的关系")]),t._v(" "),e("p",[t._v("柯里化 应用在偏函数中")]),t._v(" "),e("h2",{attrs:{id:"惰性函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#惰性函数"}},[t._v("#")]),t._v(" 惰性函数")]),t._v(" "),e("p",[t._v("原理是重写函数名字")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("var foo = function() {\n  var t = new Date();\n  foo = function() {\n      return t;\n  };\n  return foo();\n};\n")])])]),e("h2",{attrs:{id:"函数记忆"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#函数记忆"}},[t._v("#")]),t._v(" 函数记忆")])])}),[],!1,null,null,null);n.default=r.exports}}]);